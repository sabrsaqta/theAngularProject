<div class="details-container container my-5">

  <button [routerLink]="['/recipes']" class="back-button btn btn-secondary mb-4">
    &larr; –ù–∞–∑–∞–¥ –∫ –∫–∞—Ç–∞–ª–æ–≥—É
  </button>

  @if (error$ | async; as error) {
    <div class="state-message error alert alert-danger mt-4">
      –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–µ—Ç–∞–ª–µ–π: {{ error }}
    </div>
  }

  @if (isLoading$ | async) {
    <div class="state-message loading text-center py-5">
      Loading recipe details...
    </div>
  }

  <div *ngIf="selectedRecipe$ | async as recipe">
    
    <button 
        class="btn btn-sm position-absolute z-index-10 border-0" 
        (click)="toggleFavorite(recipe.id)"
        style="position: absolute; top: 120px; right: 80px; z-index: 10;">
        
        @if (recipe.isFavorite) {
            <span class="text-danger fs-3">‚ô•</span> 
        } @else {
            <span class="text-secondary fs-3">‚ô°</span> 
        }
    </button>
      
    <div class="item-details-card card shadow-lg">
      <div class="row g-0">
        
        <div class="col-md-5 image-section">
          <img [src]="recipe.image" alt="{{ recipe.title }}" class="item-image-details img-fluid rounded-start">
        </div>
        
        <div class="col-md-7 info-section p-4 position-relative">
          
          <h1>{{ recipe.title }}</h1>
          
          <p class="category-tag badge bg-primary">
            {{ (recipe.dishTypes ? recipe.dishTypes.join(', ') : '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ') | uppercase }}
          </p>
          
          <div class="price-rating my-3">
            <span class="price-tag me-3">{{ (recipe.pricePerServing ?? 0) | currency }} / –ø–æ—Ä—Ü–∏—è</span>
          </div>
          
          <hr>
          
          <p class="description" [innerHTML]="recipe.summary"></p>
          
          <hr>
          
          <div class="additional-details">
            <p><strong>üïí –í—Ä–µ–º—è –≥–æ—Ç–æ–≤–∫–∏:</strong> {{ recipe.readyInMinutes }} –º–∏–Ω—É—Ç</p>
            <p><strong>üçΩÔ∏è –ü–æ—Ä—Ü–∏–π:</strong> {{ recipe.servings }}</p>
          </div>
          
          <button class="add-to-cart-button btn btn-success btn-lg mt-3">–ì–æ—Ç–æ–≤–∏—Ç—å —ç—Ç–æ—Ç –†–µ—Ü–µ–ø—Ç</button>
        </div>
      </div>
      
      @if (recipe.instructions) {
        <div class="p-4 instructions-section">
          <h2 class="mt-4">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—é</h2>
          <div [innerHTML]="recipe.instructions"></div>
        </div>
      }
      
    </div>
  </div>
  
  @if (!(isLoading$ | async) && !(selectedRecipe$ | async)) {
    <div class="state-message not-found text-center py-5">
      <h2>404 - –†–µ—Ü–µ–ø—Ç –ù–µ –ù–∞–π–¥–µ–Ω</h2>
      <p>–ó–∞–ø—Ä–æ—à–µ–Ω–Ω—ã–π ID —Ä–µ—Ü–µ–ø—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –∫–∞—Ç–∞–ª–æ–≥–µ.</p>
    </div>
}
</div>